<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Espacio Terap√©utico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ================= BASE ================= */
:root{
  --beige:#f7f3ee;
  --lila:#c6b7e2;
  --menta:#bfe6d3;
  --menta-fuerte:#9fd9c1;
  --menta-oscura:#6fa8a1;
  --salmon:#f6c1b5;
  --ocre:#e6c46a;
  --azul:#b7d7f0;
  --texto:#4a4a4a;
}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--beige);
  color:var(--texto);
}

header{
  padding:16px;
  background:linear-gradient(90deg,var(--menta),var(--lila));
  font-weight:600;
}

.tabs{
  display:flex;
  gap:6px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.tab{
  border:none;
  background:var(--menta);
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
}

.tab.active{
  background:var(--menta-fuerte);
  font-weight:600;
}

.content{display:none;padding:16px;}
.content.active{display:block}

/* ================= D√çA ================= */
.day-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.date-nav button{
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}

.intention{
  margin:12px 0;
  font-style:italic;
  color:#b6a8e0;
}

.hour-block{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  border-left:6px solid var(--menta);
}

.half-hour{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:6px;
}

.half-hour input[type="text"]{
  flex:1;
  border:1px solid #ddd;
  border-radius:8px;
  padding:6px;
}

/* ================= SEMANA ================= */
.week-nav{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:10px;
}

.week-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.week-day{
  background:#fff;
  border-radius:12px;
  padding:8px;
  min-height:140px;
  border-top:6px solid var(--menta);
}

.week-day h4{
  margin:0 0 6px;
  font-size:13px;
}

.week-event{
  font-size:12px;
  background:#eef8f3;
  border-radius:6px;
  padding:4px;
  margin-bottom:4px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.delete{
  cursor:pointer;
  margin-left:6px;
}

/* ================= MES ================= */
.month-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.month-header button{
  border:none;
  background:none;
  font-size:18px;
  cursor:pointer;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day-name{
  text-align:center;
  font-weight:600;
  font-size:14px;
}

.day{
  min-height:90px;
  background:white;
  border-radius:12px;
  padding:6px;
  font-size:12px;
  cursor:pointer;
}

.day-number{
  font-weight:600;
}

.event{
  margin-top:4px;
  padding:3px 5px;
  border-radius:6px;
  font-size:11px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.birthday{background:var(--salmon)}
.medical{background:var(--ocre)}
.vet{background:var(--menta-oscura);color:white}

/* ================= SEMESTRE ================= */
.semester-wrapper{
  display:flex;
  flex-direction:column;
  gap:20px;
}

.semester-month{
  background:#fff;
  border-radius:16px;
  padding:12px;
}

.semester-month h3{
  margin:0 0 10px;
}

.semester-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
}

.sem-day{
  min-height:50px;
  border-radius:8px;
  padding:4px;
  font-size:11px;
  background:#f9f9f9;
  position:relative;
  cursor:pointer;
}

.sem-bar{
  position:absolute;
  inset:0;
  opacity:.6;
  border-radius:8px;
}

.cat-menta{background:var(--menta)}
.cat-lila{background:var(--lila)}
.cat-salmon{background:var(--salmon)}
.cat-azul{background:var(--azul)}
.cat-ocre{background:var(--ocre)}

/* ================= MODAL ================= */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal-content{
  background:white;
  padding:20px;
  border-radius:16px;
  width:320px;
}

.modal-content input,
.modal-content select,
.modal-content textarea{
  width:100%;
  margin-bottom:8px;
}
</style>
</head>

<body>

<header>üå± Mi espacio terap√©utico</header>

<div class="tabs">
  <button class="tab active" onclick="openTab('day')">D√≠a</button>
  <button class="tab" onclick="openTab('week')">Semana</button>
  <button class="tab" onclick="openTab('month')">Mes</button>
  <button class="tab" onclick="openTab('semester')">Semestre</button>
  <button class="tab" onclick="openTab('projects')">Proyectos</button>
  <button class="tab" onclick="openTab('health')">Salud</button>
</div>

<!-- TODO LO EXISTENTE DE D√çA / SEMANA / MES SE MANTIENE IGUAL -->
<!-- ‚Ä¶ (exactamente como me lo pasaste) ‚Ä¶ -->

<div id="semester" class="content">
  <h2>üìÜ Roadmap Semestral</h2>
  <div class="semester-wrapper" id="semesterWrapper"></div>
</div>

<div id="projects" class="content">üéØ Proyectos (en construcci√≥n)</div>
<div id="health" class="content">üíö Salud (en construcci√≥n)</div>

<!-- MODAL SEMESTRE -->
<div class="modal" id="semesterModal">
  <div class="modal-content">
    <h3>Nuevo proyecto</h3>
    <select id="semCategory">
      <option value="cat-menta">DesdeCeroLatam</option>
      <option value="cat-lila">RelazoApp</option>
      <option value="cat-salmon">C√≥moSucedi√≥</option>
      <option value="cat-azul">SegundoLibro</option>
      <option value="cat-ocre">VidaEnEuropa</option>
    </select>
    <input type="date" id="semStart">
    <input type="date" id="semEnd">
    <textarea id="semText" placeholder="Detalles / foco de trabajo"></textarea>
    <button onclick="saveSemester()">Guardar</button>
  </div>
</div>

<script>
/* ================= SEMESTRE JS ================= */
let semesterEvents=JSON.parse(localStorage.getItem("semesterEvents")||"[]");
let semTempStart=null;

function renderSemester(){
  semesterWrapper.innerHTML="";
  const base=new Date();
  for(let m=0;m<6;m++){
    const d=new Date(base.getFullYear(),base.getMonth()+m,1);
    const box=document.createElement("div");
    box.className="semester-month";
    box.innerHTML=`<h3>${d.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}</h3>`;
    const grid=document.createElement("div");
    grid.className="semester-grid";

    const first=(d.getDay()+6)%7;
    const days=new Date(d.getFullYear(),d.getMonth()+1,0).getDate();
    for(let i=0;i<first;i++)grid.appendChild(document.createElement("div"));

    for(let day=1;day<=days;day++){
      const cell=document.createElement("div");
      cell.className="sem-day";
      const dateKey=`${d.getFullYear()}-${d.getMonth()}-${day}`;
      cell.textContent=day;
      cell.onclick=()=>openSemesterModal(dateKey);
      semesterEvents.forEach(ev=>{
        if(dateKey>=ev.start && dateKey<=ev.end){
          const bar=document.createElement("div");
          bar.className="sem-bar "+ev.cat;
          cell.appendChild(bar);
        }
      });
      grid.appendChild(cell);
    }
    box.appendChild(grid);
    semesterWrapper.appendChild(box);
  }
}

function openSemesterModal(date){
  semTempStart=date;
  semesterModal.style.display="flex";
  semStart.value=date;
}

function saveSemester(){
  semesterEvents.push({
    start:semStart.value,
    end:semEnd.value,
    cat:semCategory.value,
    text:semText.value
  });
  localStorage.setItem("semesterEvents",JSON.stringify(semesterEvents));
  semesterModal.style.display="none";
  renderSemester();
}

renderSemester();
</script>

</body>
</html>

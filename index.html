<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Espacio TerapÃ©utico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --beige:#f7f3ee;
  --lila:#c6b7e2;
  --menta:#bfe6d3;
  --menta-fuerte:#9fd9c1;
  --texto:#4a4a4a;
}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--beige);
  color:var(--texto);
}

header{
  padding:16px;
  background:linear-gradient(90deg,var(--menta),var(--lila));
}

.tabs{
  display:flex;
  gap:6px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.tab{
  border:none;
  background:var(--menta);
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
}

.tab.active{
  background:var(--menta-fuerte);
  font-weight:600;
}

.content{display:none;padding:16px;}
.content.active{display:block}

/* -------- DÃA -------- */

.day-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.date-nav button{
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}

.intention{
  margin:12px 0;
  font-style:italic;
  color:#9a8bc7;
}

.hour-block{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  border-left:6px solid var(--menta);
}

.half-hour{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:6px;
}

.half-hour input[type="text"]{
  flex:1;
  border:1px solid #ddd;
  border-radius:8px;
  padding:6px;
}

/* -------- SEMANA -------- */

.week-nav{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:10px;
}

.week-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.week-day{
  background:#fff;
  border-radius:12px;
  padding:8px;
  min-height:140px;
  border-top:6px solid var(--menta);
}

.week-day h4{
  margin:0 0 6px;
  font-size:13px;
}

.week-event{
  font-size:12px;
  background:#eef8f3;
  border-radius:6px;
  padding:4px;
  margin-bottom:4px;
}
</style>
</head>

<body>

<header>ğŸŒ± Mi espacio</header>

<div class="tabs">
  <button class="tab active" onclick="openTab('day')">DÃ­a</button>
  <button class="tab" onclick="openTab('week')">Semana</button>
  <button class="tab" onclick="openTab('month')">Mes</button>
  <button class="tab" onclick="openTab('semester')">Semestre</button>
  <button class="tab" onclick="openTab('projects')">Proyectos</button>
  <button class="tab" onclick="openTab('health')">Salud</button>
</div>

<!-- DÃA -->
<div id="day" class="content active">
  <div class="day-header">
    <div class="date-nav">
      <button onclick="changeDay(-1)">â†</button>
      <span id="currentDate"></span>
      <button onclick="changeDay(1)">â†’</button>
    </div>
  </div>

  <div class="intention">
    IntenciÃ³n del dÃ­a...
    <input type="text" style="width:100%;margin-top:6px">
  </div>

  <div id="hours"></div>
</div>

<!-- SEMANA -->
<div id="week" class="content">
  <div class="week-nav">
    <button onclick="changeWeek(-1)">â†‘</button>
    <strong>Semana</strong>
    <button onclick="changeWeek(1)">â†“</button>
  </div>
  <div class="week-grid" id="weekGrid"></div>
</div>

<!-- OTRAS -->
<div id="month" class="content">ğŸ—“ Mes</div>
<div id="semester" class="content">ğŸ“† Semestre</div>
<div id="projects" class="content">ğŸ¯ Proyectos</div>
<div id="health" class="content">ğŸ’š Salud</div>

<script>
let currentDay = new Date();
let currentWeekOffset = 0;
let weekEvents = JSON.parse(localStorage.getItem("weekEvents")||"{}");

/* ---------- UTIL ---------- */
function formatDate(d){
  return d.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});
}
function dateKey(d){
  return d.toISOString().split("T")[0];
}

/* ---------- TABS ---------- */
function openTab(id){
  document.querySelectorAll(".content").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

/* ---------- DÃA ---------- */
function renderDay(){
  document.getElementById("currentDate").textContent = formatDate(currentDay);
}

function changeDay(n){
  currentDay.setDate(currentDay.getDate()+n);
  renderDay();
  renderHours();
}

function renderHours(){
  const c=document.getElementById("hours");
  c.innerHTML="";
  for(let h=4;h<=23;h++){
    const b=document.createElement("div");
    b.className="hour-block";
    b.innerHTML=`<strong>${h}:00</strong>`;
    ["00","30"].forEach(m=>{
      const row=document.createElement("div");
      row.className="half-hour";
      row.innerHTML=`
        <input type="checkbox">
        <input type="text" placeholder="${h}:${m}">
        <label>
          <input type="checkbox" onchange="toggleWeek(this,'${h}:${m}')">
          mostrar en semana
        </label>`;
      b.appendChild(row);
    });
    c.appendChild(b);
  }
}

/* ---------- SEMANA ---------- */
function startOfWeek(d){
  const n=new Date(d);
  const day=n.getDay()||7;
  n.setDate(n.getDate()-day+1);
  return n;
}

function renderWeek(){
  const grid=document.getElementById("weekGrid");
  grid.innerHTML="";
  let base=startOfWeek(new Date());
  base.setDate(base.getDate()+currentWeekOffset*7);

  for(let i=0;i<7;i++){
    const d=new Date(base);
    d.setDate(base.getDate()+i);
    const key=dateKey(d);

    const col=document.createElement("div");
    col.className="week-day";
    col.innerHTML=`<h4>${d.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short"})}</h4>`;

    (weekEvents[key]||[]).forEach(e=>{
      col.innerHTML+=`<div class="week-event">ğŸ•’ ${e.time} â€“ ${e.text}</div>`;
    });

    grid.appendChild(col);
  }
}

function changeWeek(n){
  currentWeekOffset+=n;
  renderWeek();
}

/* ---------- CONEXIÃ“N ---------- */
function toggleWeek(cb,time){
  const text=cb.closest(".half-hour").querySelector("input[type=text]").value;
  const key=dateKey(currentDay);
  if(!weekEvents[key]) weekEvents[key]=[];

  if(cb.checked){
    weekEvents[key].push({time,text});
  }else{
    weekEvents[key]=weekEvents[key].filter(e=>e.time!==time||e.text!==text);
  }
  localStorage.setItem("weekEvents",JSON.stringify(weekEvents));
  renderWeek();
}

renderDay();
renderHours();
renderWeek();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Espacio Terap√©utico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --beige:#f7f3ee;
  --lila:#c6b7e2;
  --menta:#bfe6d3;
  --menta-fuerte:#9fd9c1;
  --menta-oscura:#6fa8a1;
  --salmon:#f6c1b5;
  --ocre:#e6c46a;
  --texto:#4a4a4a;
}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--beige);
  color:var(--texto);
}

header{
  padding:16px;
  background:linear-gradient(90deg,var(--menta),var(--lila));
  font-weight:600;
}

.tabs{
  display:flex;
  gap:6px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.tab{
  border:none;
  background:var(--menta);
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
}

.tab.active{
  background:var(--menta-fuerte);
  font-weight:600;
}

.content{display:none;padding:16px;}
.content.active{display:block}

/* -------- D√çA -------- */
.day-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.date-nav button{
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}

.intention{
  margin:12px 0;
  font-style:italic;
  color:#b6a8e0;
}

.hour-block{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  border-left:6px solid var(--menta);
}

.half-hour{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:6px;
}

.half-hour input[type="text"]{
  flex:1;
  border:1px solid #ddd;
  border-radius:8px;
  padding:6px;
}

/* -------- SEMANA -------- */
.week-nav{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:10px;
}

.week-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.week-day{
  background:#fff;
  border-radius:12px;
  padding:8px;
  min-height:140px;
  border-top:6px solid var(--menta);
}

.week-event{
  font-size:12px;
  background:#eef8f3;
  border-radius:6px;
  padding:4px;
  margin-bottom:4px;
  display:flex;
  justify-content:space-between;
}

/* -------- MES -------- */
.month-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day-name{
  text-align:center;
  font-weight:600;
}

.day{
  background:#fff;
  border-radius:12px;
  padding:6px;
  min-height:90px;
  cursor:pointer;
}

.event{
  margin-top:4px;
  padding:3px 6px;
  border-radius:6px;
  font-size:11px;
  display:flex;
  justify-content:space-between;
}

.birthday{background:var(--salmon)}
.medical{background:var(--ocre)}
.vet{background:var(--menta-oscura);color:white}

/* -------- SEMESTRE / ROADMAP -------- */
.semester-container{
  display:flex;
  flex-direction:column;
  gap:24px;
}

.month-block{
  background:#fff;
  border-radius:16px;
  padding:12px;
}

.month-title{
  font-weight:600;
  margin-bottom:6px;
}

.weekdays{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  font-size:11px;
  text-align:center;
  margin-bottom:6px;
}

.month-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:4px;
}

.month-day{
  height:26px;
  font-size:10px;
  text-align:center;
}

.bar{
  margin-top:4px;
  border-radius:8px;
  padding:4px;
  font-size:11px;
  cursor:pointer;
  background:var(--menta);
}
</style>
</head>

<body>

<header>üå± New Beginning Planner</header>

<div class="tabs">
  <button class="tab active" onclick="showTab('day')">D√≠a</button>
  <button class="tab" onclick="showTab('week')">Semana</button>
  <button class="tab" onclick="showTab('month')">Mes</button>
  <button class="tab" onclick="showTab('semester')">Semestre</button>
  <button class="tab" onclick="showTab('projects')">Proyectos</button>
  <button class="tab" onclick="showTab('health')">Salud</button>
</div>

<!-- ---------- D√çA ---------- -->
<div id="day" class="content active">
  <div class="day-header">
    <div class="date-nav">
      <button onclick="changeDay(-1)">‚¨Ö</button>
      <span id="dayTitle"></span>
      <button onclick="changeDay(1)">‚û°</button>
    </div>
  </div>

  <div class="intention">
    Intenci√≥n del d√≠a:
    <input type="text" id="dayIntention">
  </div>

  <div id="daySchedule"></div>
</div>

<!-- ---------- SEMANA ---------- -->
<div id="week" class="content">
  <div class="week-nav">
    <button onclick="changeWeek(-1)">‚¨Ö Semana</button>
    <button onclick="changeWeek(1)">Semana ‚û°</button>
  </div>
  <div class="week-grid" id="weekGrid"></div>
</div>

<!-- ---------- MES ---------- -->
<div id="month" class="content">
  <div class="month-header">
    <button onclick="changeMonth(-1)">‚¨Ö</button>
    <h3 id="monthTitle"></h3>
    <button onclick="changeMonth(1)">‚û°</button>
  </div>

  <div class="calendar" id="calendar"></div>
</div>

<!-- ---------- SEMESTRE ---------- -->
<div id="semester" class="content">
  <div class="month-header">
    <button onclick="changeSemester(-1)">‚¨Ö</button>
    <h3 id="semesterTitle"></h3>
    <button onclick="changeSemester(1)">‚û°</button>
  </div>

  <div class="semester-container" id="semesterContainer"></div>
</div>

<!-- ---------- OTROS ---------- -->
<div id="projects" class="content">
  <p>üìÅ √Årea de proyectos (en construcci√≥n)</p>
</div>

<div id="health" class="content">
  <p>üß† √Årea de salud (en construcci√≥n)</p>
</div>

<!-- ---------- MODAL EVENTOS ---------- -->
<div id="modal" class="modal">
  <div class="modal-content">
    <h3>Evento</h3>

    <label>Categor√≠a</label>
    <select id="eventCategory" multiple>
      <option value="DesdeCeroLatam">DesdeCeroLatam</option>
      <option value="RelazoApp">RelazoApp</option>
      <option value="ComoSucedio">C√≥mo Sucedi√≥</option>
      <option value="SegundoLibro">Segundo Libro</option>
      <option value="VidaEuropa">Vida en Europa</option>
    </select>

    <label>Detalle</label>
    <input type="text" id="eventDetail">

    <label>Fecha inicio</label>
    <input type="date" id="eventStart">

    <label>Fecha fin</label>
    <input type="date" id="eventEnd">

    <button onclick="saveBar()">Guardar</button>
    <button onclick="deleteBar()">Eliminar</button>
  </div>
</div>

<script>
let today = new Date();
let semesterBase = new Date();
let events = [];

const colors = {
  DesdeCeroLatam: "var(--menta)",
  RelazoApp: "var(--lila)",
  ComoSucedio: "var(--salmon)",
  SegundoLibro: "#9ad0ec",
  VidaEuropa: "var(--ocre)"
};

function showTab(id){
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
}

/* ---------- D√çA ---------- */
function renderDay(){
  document.getElementById('dayTitle').innerText = today.toDateString();
  const container = document.getElementById('daySchedule');
  container.innerHTML = "";
  for(let h=6;h<=22;h++){
    const block = document.createElement('div');
    block.className="hour-block";
    block.innerHTML=`<strong>${h}:00</strong>
      <div class="half-hour">
        <input type="text" placeholder="Actividad">
      </div>`;
    container.appendChild(block);
  }
}
function changeDay(d){today.setDate(today.getDate()+d);renderDay();}

/* ---------- SEMANA ---------- */
function renderWeek(){
  const grid=document.getElementById('weekGrid');
  grid.innerHTML="";
  let start=new Date(today);
  start.setDate(start.getDate()-start.getDay()+1);
  for(let i=0;i<7;i++){
    const d=new Date(start);
    d.setDate(start.getDate()+i);
    const el=document.createElement('div');
    el.className="week-day";
    el.innerHTML=`<strong>${d.toDateString()}</strong>`;
    grid.appendChild(el);
  }
}
function changeWeek(d){today.setDate(today.getDate()+7*d);renderWeek();}

/* ---------- MES ---------- */
function renderMonth(){
  const cal=document.getElementById('calendar');
  cal.innerHTML="";
  const year=today.getFullYear(),month=today.getMonth();
  document.getElementById('monthTitle').innerText=today.toLocaleString('es',{month:'long',year:'numeric'});

  ["L","M","X","J","V","S","D"].forEach(d=>{
    const n=document.createElement('div');
    n.className="day-name";n.innerText=d;cal.appendChild(n);
  });

  const first=new Date(year,month,1);
  let start=(first.getDay()+6)%7;
  for(let i=0;i<start;i++)cal.appendChild(document.createElement('div'));

  const days=new Date(year,month+1,0).getDate();
  for(let d=1;d<=days;d++){
    const cell=document.createElement('div');
    cell.className="day";
    cell.innerHTML=`<strong>${d}</strong>`;
    cal.appendChild(cell);
  }
}
function changeMonth(d){today.setMonth(today.getMonth()+d);renderMonth();}

/* ---------- SEMESTRE / ROADMAP ---------- */
let selectedBar = null;

function renderSemester(){
  const container = document.getElementById("semesterContainer");
  container.innerHTML = "";

  const base = new Date(semesterBase);
  base.setDate(1);

  document.getElementById("semesterTitle").innerText =
    base.toLocaleString("es", { month: "long", year: "numeric" });

  const daysHeader = document.createElement("div");
  daysHeader.className = "weekdays";
  ["L","M","X","J","V","S","D"].forEach(d=>{
    const s=document.createElement("span");
    s.innerText=d;
    daysHeader.appendChild(s);
  });
  container.appendChild(daysHeader);

  const grid = document.createElement("div");
  grid.className = "semester-grid";

  let startDay = new Date(base);
  let offset = (startDay.getDay() + 6) % 7;
  startDay.setDate(startDay.getDate() - offset);

  for(let i=0;i<42;i++){
    const cellDate = new Date(startDay);
    cellDate.setDate(startDay.getDate()+i);

    const cell = document.createElement("div");
    cell.className = "semester-day";
    cell.innerHTML = `<small>${cellDate.getDate()}</small>`;
    cell.onclick = ()=>openModal(cellDate);
    grid.appendChild(cell);
  }

  container.appendChild(grid);
  renderBars(grid, startDay);
}

function renderBars(grid,start){
  events.forEach(ev=>{
    const s=new Date(ev.start);
    const e=new Date(ev.end);
    const days=(e-s)/(1000*60*60*24)+1;

    const index=Math.round((s-start)/(1000*60*60*24));
    if(index<0||index>=42) return;

    const bar=document.createElement("div");
    bar.className="bar";
    bar.style.gridColumn=`${index+1} / span ${days}`;
    bar.style.background=colors[ev.category[0]]||"#ccc";
    bar.innerText=ev.detail||ev.category.join(", ");

    bar.onclick=(x)=>{
      x.stopPropagation();
      selectedBar=ev;
      openModal(s,ev);
    };
    grid.appendChild(bar);
  });
}

function openModal(date,ev=null){
  document.getElementById("modal").style.display="flex";
  document.getElementById("eventStart").value = date.toISOString().split("T")[0];
  document.getElementById("eventEnd").value =
    ev ? ev.end : date.toISOString().split("T")[0];
  document.getElementById("eventDetail").value = ev?ev.detail:"";

  const sel=document.getElementById("eventCategory");
  [...sel.options].forEach(o=>o.selected=ev?ev.category.includes(o.value):false);
}

function saveBar(){
  const sel=[...eventCategory.selectedOptions].map(o=>o.value);
  const ev={
    category: sel,
    detail: eventDetail.value,
    start: eventStart.value,
    end: eventEnd.value
  };

  if(selectedBar){
    Object.assign(selectedBar,ev);
    selectedBar=null;
  } else {
    events.push(ev);
  }
  closeModal();
  renderSemester();
}

function deleteBar(){
  if(selectedBar){
    events=events.filter(e=>e!==selectedBar);
    selectedBar=null;
    renderSemester();
  }
  closeModal();
}

function closeModal(){
  document.getElementById("modal").style.display="none";
}

function changeSemester(d){
  semesterBase.setMonth(semesterBase.getMonth()+d);
  renderSemester();
}

/* ---------- INIT ---------- */
renderDay();
renderWeek();
renderMonth();
renderSemester();

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Espacio Terap√©utico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --beige:#f7f3ee;
  --lila:#c6b7e2;
  --menta:#bfe6d3;
  --menta-fuerte:#9fd9c1;
  --menta-oscura:#6fa8a1;
  --salmon:#f6c1b5;
  --ocre:#e6c46a;
  --texto:#4a4a4a;
}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--beige);
  color:var(--texto);
}

header{
  padding:16px;
  background:linear-gradient(90deg,var(--menta),var(--lila));
  font-weight:600;
}

.tabs{
  display:flex;
  gap:6px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.tab{
  border:none;
  background:var(--menta);
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
}

.tab.active{
  background:var(--menta-fuerte);
  font-weight:600;
}

.content{display:none;padding:16px;}
.content.active{display:block}

/* -------- D√çA -------- */
.day-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.date-nav button{
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}

.intention{
  margin:12px 0;
  font-style:italic;
  color:#b6a8e0;
}

.hour-block{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  border-left:6px solid var(--menta);
}

.half-hour{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:6px;
}

.half-hour input[type="text"]{
  flex:1;
  border:1px solid #ddd;
  border-radius:8px;
  padding:6px;
}

/* -------- SEMANA -------- */
.week-nav{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:10px;
}

.week-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.week-day{
  background:#fff;
  border-radius:12px;
  padding:8px;
  min-height:140px;
  border-top:6px solid var(--menta);
}

.week-day h4{
  margin:0 0 6px;
  font-size:13px;
}

.week-event{
  font-size:12px;
  background:#eef8f3;
  border-radius:6px;
  padding:4px;
  margin-bottom:4px;
}

/* -------- MES -------- */
.month-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.month-header button{
  border:none;
  background:none;
  font-size:18px;
  cursor:pointer;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day-name{
  text-align:center;
  font-weight:600;
  font-size:14px;
}

.day{
  min-height:90px;
  background:white;
  border-radius:12px;
  padding:6px;
  font-size:12px;
  cursor:pointer;
}

.day-number{
  font-weight:600;
}

.event{margin-top:4px;padding:3px 5px;border-radius:6px;font-size:11px}
.birthday{background:var(--salmon)}
.medical{background:var(--ocre)}
.vet{background:var(--menta-oscura);color:white}

/* -------- MODAL -------- */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal-content{
  background:white;
  padding:20px;
  border-radius:16px;
  width:300px;
}
</style>
</head>

<body>

<header>üå± Mi espacio terap√©utico</header>

<div class="tabs">
  <button class="tab active" onclick="openTab('day')">D√≠a</button>
  <button class="tab" onclick="openTab('week')">Semana</button>
  <button class="tab" onclick="openTab('month')">Mes</button>
  <button class="tab" onclick="openTab('semester')">Semestre</button>
  <button class="tab" onclick="openTab('projects')">Proyectos</button>
  <button class="tab" onclick="openTab('health')">Salud</button>
</div>

<!-- D√çA -->
<div id="day" class="content active">
  <div class="day-header">
    <div class="date-nav">
      <button onclick="changeDay(-1)">‚Üê</button>
      <span id="currentDate"></span>
      <button onclick="changeDay(1)">‚Üí</button>
    </div>
  </div>

  <div class="intention">
    Intenci√≥n del d√≠a...
    <input type="text" style="width:100%;margin-top:6px">
  </div>

  <div id="hours"></div>
</div>

<!-- SEMANA -->
<div id="week" class="content">
  <div class="week-nav">
    <button onclick="changeWeek(-1)">‚Üë</button>
    <strong>Semana</strong>
    <button onclick="changeWeek(1)">‚Üì</button>
  </div>
  <div class="week-grid" id="weekGrid"></div>
</div>

<!-- MES -->
<div id="month" class="content">
  <div class="month-header">
    <button onclick="changeMonth(-1)">‚¨Ö</button>
    <h3 id="monthTitle"></h3>
    <button onclick="changeMonth(1)">‚û°</button>
  </div>
  <div class="calendar" id="calendar"></div>
</div>

<div id="semester" class="content">üìÜ Semestre (en construcci√≥n)</div>
<div id="projects" class="content">üéØ Proyectos (en construcci√≥n)</div>
<div id="health" class="content">üíö Salud (en construcci√≥n)</div>

<!-- MODAL MES -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3>Agregar evento</h3>
    <select id="eventType">
      <option value="birthday">üéÇ Cumplea√±os</option>
      <option value="medical">‚ö†Ô∏è Cita m√©dica</option>
      <option value="vet">‚ö†Ô∏è Veterinario</option>
    </select>
    <input id="eventText" placeholder="Descripci√≥n">
    <input id="eventTime" type="time">
    <button onclick="saveEvent()">Guardar</button>
  </div>
</div>

<script>
let currentDay=new Date();
let currentWeekOffset=0;
let weekEvents=JSON.parse(localStorage.getItem("weekEvents")||"{}");

function openTab(id){
  document.querySelectorAll(".content").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

function formatDate(d){
  return d.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});
}
function dateKey(d){return d.toISOString().split("T")[0];}

function renderDay(){
  currentDate.textContent=formatDate(currentDay);
}
function changeDay(n){
  currentDay.setDate(currentDay.getDate()+n);
  renderDay();renderHours();
}

function renderHours(){
  hours.innerHTML="";
  for(let h=4;h<=23;h++){
    const b=document.createElement("div");
    b.className="hour-block";
    b.innerHTML=`<strong>${h}:00</strong>`;
    ["00","30"].forEach(m=>{
      const r=document.createElement("div");
      r.className="half-hour";
      r.innerHTML=`
        <input type="checkbox">
        <input type="text" placeholder="${h}:${m}">
        <label><input type="checkbox" onchange="toggleWeek(this,'${h}:${m}')"> mostrar en semana</label>`;
      b.appendChild(r);
    });
    hours.appendChild(b);
  }
}

function startOfWeek(d){
  const n=new Date(d);const day=n.getDay()||7;
  n.setDate(n.getDate()-day+1);return n;
}

function renderWeek(){
  weekGrid.innerHTML="";
  let base=startOfWeek(new Date());
  base.setDate(base.getDate()+currentWeekOffset*7);
  for(let i=0;i<7;i++){
    const d=new Date(base);d.setDate(base.getDate()+i);
    const col=document.createElement("div");
    col.className="week-day";
    col.innerHTML=`<h4>${d.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short"})}</h4>`;
    (weekEvents[dateKey(d)]||[]).forEach(e=>{
      col.innerHTML+=`<div class="week-event">üïí ${e.time} ‚Äì ${e.text}</div>`;
    });
    weekGrid.appendChild(col);
  }
}
function changeWeek(n){currentWeekOffset+=n;renderWeek();}
function toggleWeek(cb,time){
  const text=cb.closest(".half-hour").querySelector("input[type=text]").value;
  const k=dateKey(currentDay);
  if(!weekEvents[k])weekEvents[k]=[];
  if(cb.checked)weekEvents[k].push({time,text});
  else weekEvents[k]=weekEvents[k].filter(e=>e.time!==time||e.text!==text);
  localStorage.setItem("weekEvents",JSON.stringify(weekEvents));
  renderWeek();
}

/* MES */
let currentDate=new Date(),selectedDay=null,events={};
const months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];

function renderCalendar(){
  calendar.innerHTML="";
  monthTitle.textContent=months[currentDate.getMonth()]+" "+currentDate.getFullYear();
  ["Lun","Mar","Mi√©","Jue","Vie","S√°b","Dom"].forEach(d=>{
    const e=document.createElement("div");e.className="day-name";e.textContent=d;calendar.appendChild(e);
  });
  const first=new Date(currentDate.getFullYear(),currentDate.getMonth(),1);
  const start=(first.getDay()+6)%7;
  const days=new Date(currentDate.getFullYear(),currentDate.getMonth()+1,0).getDate();
  for(let i=0;i<start;i++)calendar.appendChild(document.createElement("div"));
  for(let d=1;d<=days;d++){
    const box=document.createElement("div");box.className="day";box.onclick=()=>openModal(d);
    box.innerHTML=`<div class="day-number">${d}</div>`;
    const k=`${currentDate.getFullYear()}-${currentDate.getMonth()}-${d}`;
    (events[k]||[]).forEach(e=>{
      box.innerHTML+=`<div class="event ${e.type}">${(e.type!=="birthday"?"‚ö†Ô∏è ":"")+e.text+(e.time?" "+e.time:"")}</div>`;
    });
    calendar.appendChild(box);
  }
}
function changeMonth(n){currentDate.setMonth(currentDate.getMonth()+n);renderCalendar();}
function openModal(d){selectedDay=d;modal.style.display="flex";}
function saveEvent(){
  const k=`${currentDate.getFullYear()}-${currentDate.getMonth()}-${selectedDay}`;
  if(!events[k])events[k]=[];
  events[k].push({type:eventType.value,text:eventText.value,time:eventTime.value});
  modal.style.display="none";renderCalendar();
}

renderDay();renderHours();renderWeek();renderCalendar();
</script>

</body>
</html>

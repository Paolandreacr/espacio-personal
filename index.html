<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Planner New Beginning</title>
  <style>
    :root{
      --salmon:#f6c1b5;
      --ocre:#e6c46a;
      --menta:#6fa8a1;
      --lila:#cbb7e2;
      --gris:#f5f5f5;
      --texto:#444;
    }

    body{
      font-family: 'Segoe UI', sans-serif;
      background:#fafafa;
      color:var(--texto);
      margin:0;
      padding:20px;
    }

    /* ---------- TABS ---------- */
    .tabs{
      display:flex;
      gap:10px;
      margin-bottom:20px;
    }

    .tab{
      padding:10px 16px;
      border-radius:12px;
      background:var(--gris);
      cursor:pointer;
    }

    .tab.active{
      background:var(--lila);
      font-weight:600;
    }

    .section{
      display:none;
    }

    .section.active{
      display:block;
    }

    /* ---------- MES ---------- */
    .month-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }

    .month-header button{
      background:none;
      border:none;
      font-size:18px;
      cursor:pointer;
    }

    .calendar{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:8px;
    }

    .day-name{
      text-align:center;
      font-weight:600;
      font-size:14px;
    }

    .day{
      min-height:90px;
      background:white;
      border-radius:12px;
      padding:6px;
      font-size:12px;
      cursor:pointer;
      box-shadow:0 2px 5px rgba(0,0,0,0.05);
    }

    .day-number{
      font-weight:600;
      margin-bottom:4px;
    }

    .event{
      margin-top:4px;
      padding:3px 5px;
      border-radius:6px;
      font-size:11px;
    }

    .birthday{ background:var(--salmon); }
    .medical{ background:var(--ocre); }
    .vet{ background:var(--menta); color:white; }

    /* ---------- MODAL ---------- */
    .modal{
      position:fixed;
      top:0;left:0;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.4);
      display:none;
      justify-content:center;
      align-items:center;
    }

    .modal-content{
      background:white;
      padding:20px;
      border-radius:16px;
      width:300px;
    }

    .modal-content h3{
      margin-top:0;
    }

    .modal-content label{
      display:block;
      margin-top:10px;
      font-size:13px;
    }

    .modal-content input,
    .modal-content select{
      width:100%;
      padding:6px;
      margin-top:4px;
    }

    .modal-content button{
      margin-top:14px;
      width:100%;
      padding:8px;
      border:none;
      border-radius:10px;
      background:var(--lila);
      cursor:pointer;
    }
  </style>
</head>

<body>

  <!-- ---------- TABS ---------- -->
  <div class="tabs">
    <div class="tab active" onclick="showSection('day')">D√≠a</div>
    <div class="tab" onclick="showSection('week')">Semana</div>
    <div class="tab" onclick="showSection('month')">Mes</div>
    <div class="tab" onclick="showSection('projects')">Proyectos</div>
    <div class="tab" onclick="showSection('health')">Salud</div>
  </div>

  <!-- ---------- SECTIONS ---------- -->
  <div id="day" class="section active">
    <p>Aqu√≠ va todo lo que ya ten√≠as del d√≠a (NO TOCADO).</p>
  </div>

  <div id="week" class="section">
    <p>Aqu√≠ va la vista semanal que ya hicimos (NO TOCADA).</p>
  </div>

  <!-- ---------- MES ---------- -->
  <div id="month" class="section">
    <div class="month-header">
      <button onclick="changeMonth(-1)">‚¨Ö</button>
      <h2 id="monthTitle"></h2>
      <button onclick="changeMonth(1)">‚û°</button>
    </div>

    <div class="calendar" id="calendar"></div>
  </div>

  <div id="projects" class="section">
    <p>Proyectos (sin cambios).</p>
  </div>

  <div id="health" class="section">
    <p>Salud (sin cambios).</p>
  </div>

  <!-- ---------- MODAL ---------- -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h3>Agregar evento</h3>

      <label>Tipo</label>
      <select id="eventType">
        <option value="birthday">üéÇ Cumplea√±os</option>
        <option value="medical">‚ö†Ô∏è Cita m√©dica</option>
        <option value="vet">‚ö†Ô∏è Veterinario</option>
      </select>

      <label>Nombre / Descripci√≥n</label>
      <input type="text" id="eventText">

      <label>Hora (opcional)</label>
      <input type="time" id="eventTime">

      <button onclick="saveEvent()">Guardar</button>
    </div>
  </div>

  <!-- ---------- SCRIPT ---------- -->
  <script>
    let currentDate = new Date();
    let selectedDay = null;
    const events = {};

    const monthNames = [
      "Enero","Febrero","Marzo","Abril","Mayo","Junio",
      "Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"
    ];

    function showSection(id){
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }

    function renderCalendar(){
      const calendar = document.getElementById('calendar');
      calendar.innerHTML = "";

      document.getElementById('monthTitle').innerText =
        monthNames[currentDate.getMonth()] + " " + currentDate.getFullYear();

      const dayNames = ["Lun","Mar","Mi√©","Jue","Vie","S√°b","Dom"];
      dayNames.forEach(d=>{
        const el = document.createElement('div');
        el.className="day-name";
        el.innerText=d;
        calendar.appendChild(el);
      });

      const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
      const startDay = (firstDay.getDay() + 6) % 7;
      const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth()+1, 0).getDate();

      for(let i=0;i<startDay;i++){
        calendar.appendChild(document.createElement('div'));
      }

      for(let d=1;d<=daysInMonth;d++){
        const day = document.createElement('div');
        day.className="day";
        day.onclick=()=>openModal(d);

        const num = document.createElement('div');
        num.className="day-number";
        num.innerText=d;
        day.appendChild(num);

        const key = getKey(d);
        if(events[key]){
          events[key].forEach(e=>{
            const ev = document.createElement('div');
            ev.className=`event ${e.type}`;
            ev.innerText =
              (e.type !== "birthday" ? "‚ö†Ô∏è " : "") +
              e.text +
              (e.time ? " " + e.time : "");
            day.appendChild(ev);
          });
        }

        calendar.appendChild(day);
      }
    }

    function changeMonth(delta){
      currentDate.setMonth(currentDate.getMonth()+delta);
      renderCalendar();
    }

    function getKey(day){
      return `${currentDate.getFullYear()}-${currentDate.getMonth()}-${day}`;
    }

    function openModal(day){
      selectedDay = day;
      document.getElementById('modal').style.display="flex";
      document.getElementById('eventText').value="";
      document.getElementById('eventTime').value="";
    }

    function saveEvent(){
      const type = eventType.value;
      const text = eventText.value;
      const time = eventTime.value;

      if(!text) return;

      const key = getKey(selectedDay);
      if(!events[key]) events[key]=[];
      events[key].push({type,text,time});

      document.getElementById('modal').style.display="none";
      renderCalendar();
    }

    renderCalendar();
  </script>

</body>
</html>

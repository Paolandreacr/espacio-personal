<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Espacio Terap√©utico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --beige:#f7f3ee;
  --lila:#c6b7e2;
  --menta:#bfe6d3;
  --menta-fuerte:#9fd9c1;
  --menta-oscura:#6fa8a1;
  --salmon:#f6c1b5;
  --ocre:#e6c46a;
  --celeste:#b3e5ff;
  --texto:#4a4a4a;
}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--beige);
  color:var(--texto);
}

header{
  padding:16px;
  background:linear-gradient(90deg,var(--menta),var(--lila));
  font-weight:600;
}

.tabs{
  display:flex;
  gap:6px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.tab{
  border:none;
  background:var(--menta);
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
}

.tab.active{
  background:var(--menta-fuerte);
  font-weight:600;
}

.content{display:none;padding:16px;}
.content.active{display:block}

/* -------- D√çA -------- */
.day-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.date-nav button{
  border:none;
  background:none;
  font-size:20px;
  cursor:pointer;
}

.intention{
  margin:12px 0;
  font-style:italic;
  color:#b6a8e0;
}

.hour-block{
  background:#fff;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  border-left:6px solid var(--menta);
}

.half-hour{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:6px;
}

.half-hour input[type="text"]{
  flex:1;
  border:1px solid #ddd;
  border-radius:8px;
  padding:6px;
}

/* -------- SEMANA -------- */
.week-nav{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:10px;
}

.week-grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.week-day{
  background:#fff;
  border-radius:12px;
  padding:8px;
  min-height:140px;
  border-top:6px solid var(--menta);
}

.week-day h4{
  margin:0 0 6px;
  font-size:13px;
}

.week-event{
  font-size:12px;
  background:#eef8f3;
  border-radius:6px;
  padding:4px;
  margin-bottom:4px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.delete{
  cursor:pointer;
  margin-left:6px;
}

/* -------- MES -------- */
.month-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.month-header button{
  border:none;
  background:none;
  font-size:18px;
  cursor:pointer;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day-name{
  text-align:center;
  font-weight:600;
  font-size:14px;
}

.day{
  min-height:90px;
  background:white;
  border-radius:12px;
  padding:6px;
  font-size:12px;
  cursor:pointer;
}

.day-number{
  font-weight:600;
}

.event{
  margin-top:4px;
  padding:3px 5px;
  border-radius:6px;
  font-size:11px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.birthday{background:var(--salmon)}
.medical{background:var(--ocre)}
.vet{background:var(--menta-oscura);color:white}

/* -------- SEMESTRE -------- */
.semester-grid{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:10px;
}

.semester-month{
  background:white;
  border-radius:14px;
  padding:8px;
}

.semester-day{
  font-size:11px;
  padding:3px;
  border-radius:6px;
  cursor:pointer;
}

.semester-bar{
  margin-top:6px;
  padding:4px 6px;
  border-radius:10px;
  font-size:11px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.menta{background:var(--menta)}
.lila{background:var(--lila)}
.salmon{background:var(--salmon)}
.celeste{background:var(--celeste)}
.ocre{background:var(--ocre)}

/* -------- MODAL -------- */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal-content{
  background:white;
  padding:20px;
  border-radius:16px;
  width:300px;
}
</style>
</head>

<body>

<header>üå± Mi espacio terap√©utico</header>

<div class="tabs">
  <button class="tab active" onclick="openTab('day',this)">D√≠a</button>
  <button class="tab" onclick="openTab('week',this)">Semana</button>
  <button class="tab" onclick="openTab('month',this)">Mes</button>
  <button class="tab" onclick="openTab('semester',this)">Semestre</button>
  <button class="tab" onclick="openTab('projects',this)">Proyectos</button>
  <button class="tab" onclick="openTab('health',this)">Salud</button>
</div>

<!-- D√çA -->
<div id="day" class="content active">
  <div class="day-header">
    <div class="date-nav">
      <button onclick="changeDay(-1)">‚Üê</button>
      <span id="currentDate"></span>
      <button onclick="changeDay(1)">‚Üí</button>
    </div>
  </div>

  <div class="intention">
    Intenci√≥n del d√≠a...
    <input type="text" style="width:100%;margin-top:6px">
  </div>

  <div id="hours"></div>
</div>

<!-- SEMANA -->
<div id="week" class="content">
  <div class="week-nav">
    <button onclick="changeWeek(-1)">‚Üë</button>
    <strong>Semana</strong>
    <button onclick="changeWeek(1)">‚Üì</button>
  </div>
  <div class="week-grid" id="weekGrid"></div>
</div>

<!-- MES -->
<div id="month" class="content">
  <div class="month-header">
    <button onclick="changeMonth(-1)">‚¨Ö</button>
    <h3 id="monthTitle"></h3>
    <button onclick="changeMonth(1)">‚û°</button>
  </div>
  <div class="calendar" id="calendar"></div>
</div>

<!-- SEMESTRE -->
<div id="semester" class="content">
  <h3>Roadmap semestral</h3>
  <div class="semester-grid" id="semesterGrid"></div>
</div>

<div id="projects" class="content">üéØ Proyectos (en construcci√≥n)</div>
<div id="health" class="content">üíö Salud (en construcci√≥n)</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3>Agregar evento</h3>
    <select id="eventType">
      <option value="birthday">üéÇ Cumplea√±os</option>
      <option value="medical">‚ö†Ô∏è Cita m√©dica</option>
      <option value="vet">‚ö†Ô∏è Veterinario</option>
    </select>
    <input id="eventText" placeholder="Descripci√≥n">
    <input id="eventTime" type="time">
    <button onclick="saveEvent()">Guardar</button>
  </div>
</div>

<!-- MODAL SEMESTRE -->
<div class="modal" id="semesterModal">
  <div class="modal-content">
    <h3>Proyecto</h3>
    <select id="semesterProject">
      <option value="menta">DesdeCeroLatam</option>
      <option value="lila">RelazoApp</option>
      <option value="salmon">C√≥moSucedi√≥</option>
      <option value="celeste">SegundoLibro</option>
      <option value="ocre">VidaenEuropa</option>
    </select>
    <input type="date" id="semesterStart">
    <input type="date" id="semesterEnd">
    <button onclick="saveSemester()">Guardar</button>
  </div>
</div>

<script>
/* -------- NAVEGACI√ìN -------- */
function openTab(id,el){
  document.querySelectorAll(".content").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  el.classList.add("active");
}

/* -------- D√çA -------- */
let currentDay=new Date();
function formatDate(d){return d.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});}
function renderDay(){currentDate.textContent=formatDate(currentDay);}
function changeDay(n){currentDay.setDate(currentDay.getDate()+n);renderDay();renderHours();}

function renderHours(){
  hours.innerHTML="";
  for(let h=4;h<=23;h++){
    const b=document.createElement("div");
    b.className="hour-block";
    b.innerHTML=`<strong>${h}:00</strong>`;
    ["00","30"].forEach(m=>{
      const r=document.createElement("div");
      r.className="half-hour";
      r.innerHTML=`<input type="checkbox"><input type="text" placeholder="${h}:${m}">`;
      b.appendChild(r);
    });
    hours.appendChild(b);
  }
}

/* -------- SEMANA -------- */
let currentWeekOffset=0;
let weekEvents=JSON.parse(localStorage.getItem("weekEvents")||"{}");

function dateKey(d){return d.toISOString().split("T")[0];}
function startOfWeek(d){const n=new Date(d);const day=n.getDay()||7;n.setDate(n.getDate()-day+1);return n;}

function renderWeek(){
  weekGrid.innerHTML="";
  let base=startOfWeek(new Date());
  base.setDate(base.getDate()+currentWeekOffset*7);
  for(let i=0;i<7;i++){
    const d=new Date(base);d.setDate(base.getDate()+i);
    const key=dateKey(d);
    const col=document.createElement("div");
    col.className="week-day";
    col.innerHTML=`<h4>${d.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short"})}</h4>`;
    (weekEvents[key]||[]).forEach((e,idx)=>{
      col.innerHTML+=`<div class="week-event">${e.text}<span class="delete" onclick="deleteWeekEvent('${key}',${idx})">‚ùå</span></div>`;
    });
    weekGrid.appendChild(col);
  }
}

function deleteWeekEvent(k,i){
  weekEvents[k].splice(i,1);
  localStorage.setItem("weekEvents",JSON.stringify(weekEvents));
  renderWeek();
}
function changeWeek(n){currentWeekOffset+=n;renderWeek();}

/* -------- MES -------- */
let currentDate=new Date(),selectedDay=null,events={};
const months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];

function renderCalendar(){
  calendar.innerHTML="";
  monthTitle.textContent=months[currentDate.getMonth()]+" "+currentDate.getFullYear();
  ["Lun","Mar","Mi√©","Jue","Vie","S√°b","Dom"].forEach(d=>{
    const e=document.createElement("div");e.className="day-name";e.textContent=d;calendar.appendChild(e);
  });
  const first=new Date(currentDate.getFullYear(),currentDate.getMonth(),1);
  const start=(first.getDay()+6)%7;
  const days=new Date(currentDate.getFullYear(),currentDate.getMonth()+1,0).getDate();
  for(let i=0;i<start;i++)calendar.appendChild(document.createElement("div"));
  for(let d=1;d<=days;d++){
    const box=document.createElement("div");
    box.className="day";box.onclick=()=>openModal(d);
    box.innerHTML=`<div class="day-number">${d}</div>`;
    calendar.appendChild(box);
  }
}
function changeMonth(n){currentDate.setMonth(currentDate.getMonth()+n);renderCalendar();}

/* -------- SEMESTRE -------- */
let semesterEvents=JSON.parse(localStorage.getItem("semesterEvents")||"[]");
let semesterClickDate=null;

function renderSemester(){
  semesterGrid.innerHTML="";
  const base=new Date();
  for(let m=0;m<6;m++){
    const month=new Date(base.getFullYear(),base.getMonth()+m,1);
    const box=document.createElement("div");
    box.className="semester-month";
    box.innerHTML=`<strong>${months[month.getMonth()]} ${month.getFullYear()}</strong>`;
    const days=new Date(month.getFullYear(),month.getMonth()+1,0).getDate();
    for(let d=1;d<=days;d++){
      const day=document.createElement("div");
      day.className="semester-day";
      day.textContent=d;
      day.onclick=()=>{
        semesterClickDate=`${month.getFullYear()}-${month.getMonth()+1}-${d}`;
        semesterModal.style.display="flex";
      };
      box.appendChild(day);
    }
    semesterEvents.forEach((e,idx)=>{
      if(new Date(e.start)<=month && new Date(e.end)>=month){
        const bar=document.createElement("div");
        bar.className="semester-bar "+e.color;
        bar.innerHTML=`${e.project}<span onclick="deleteSemester(${idx})">‚ùå</span>`;
        box.appendChild(bar);
      }
    });
    semesterGrid.appendChild(box);
  }
}

function saveSemester(){
  semesterEvents.push({
    project:semesterProject.options[semesterProject.selectedIndex].text,
    color:semesterProject.value,
    start:semesterStart.value,
    end:semesterEnd.value
  });
  localStorage.setItem("semesterEvents",JSON.stringify(semesterEvents));
  semesterModal.style.display="none";
  renderSemester();
}
function deleteSemester(i){
  semesterEvents.splice(i,1);
  localStorage.setItem("semesterEvents",JSON.stringify(semesterEvents));
  renderSemester();
}

/* INIT */
renderDay();
renderHours();
renderWeek();
renderCalendar();
renderSemester();
</script>

</body>
</html>
